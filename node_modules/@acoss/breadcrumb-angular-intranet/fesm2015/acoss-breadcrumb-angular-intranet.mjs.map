{"version":3,"file":"acoss-breadcrumb-angular-intranet.mjs","sources":["../../../../projects/acoss/breadcrumb-angular-intranet/src/lib/breadcrumb.service.ts","../../../../projects/acoss/breadcrumb-angular-intranet/src/lib/breadcrumb.component.ts","../../../../projects/acoss/breadcrumb-angular-intranet/src/lib/breadcrumb.component.html","../../../../projects/acoss/breadcrumb-angular-intranet/src/lib/breadcrumb.module.ts","../../../../projects/acoss/breadcrumb-angular-intranet/src/public_api.ts","../../../../projects/acoss/breadcrumb-angular-intranet/src/acoss-breadcrumb-angular-intranet.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BreadcrumbService {\n\n  constructor() { }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Router, ActivatedRoute, NavigationEnd, PRIMARY_OUTLET } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport {Location} from '@angular/common';\n\n\ninterface Breadcrumb {\n  label: string;\n  url: string;\n}\n\n@Component({\n  selector: 'lib-breadcrumb',\n  templateUrl : `./breadcrumb.component.html`,\n  styleUrls: ['./breadcrumb.component.scss']\n})\nexport class BreadcrumbComponent implements OnInit {\n\n  @Input()\n  labelFirstItem = 'Accueil';\n\n  public breadcrumbs: Breadcrumb[];\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private _location: Location\n  ) {\n    this.breadcrumbs = [];\n  }\n\n  ngOnInit() {\n    // subscribe to the NavigationEnd event\n    this.router.events.pipe(\n     filter.call( this.router.events, (event: Event) => event instanceof NavigationEnd))\n    .subscribe((event) => {\n\n      // set breadcrumbs\n      const root: ActivatedRoute = this.activatedRoute.root;\n      this.breadcrumbs = this.getBreadcrumbs(root);\n    });\n  }\n\n  goToPreviousBreadCrumbLevel(): void {\n    // the last element is the current url, the one before is the previous url\n    const currentUrlIndex = this.breadcrumbs.length - 2 ;\n    if ( currentUrlIndex < 0 ){\n      this.router.navigate(['']);\n    }else{\n      this.router.navigate([this.breadcrumbs[currentUrlIndex].url]);\n    }\n}\n\n  private getBreadcrumbs(route: ActivatedRoute, path = '', breadcrumbs: Breadcrumb[] = []): Breadcrumb[] {\n    // get the child routes\n    const children: ActivatedRoute[] = route.children;\n    const BREADCRUMB_NAME = 'pageTitle';\n    const BREADCRUMB_DISPLAY = 'breadcrumb';\n\n    // iterate over each children\n    if (children.length > 0) {\n      for (const child of children) {\n        // verify primary route\n        if (child.outlet !== PRIMARY_OUTLET) {\n          continue;\n        }\n\n        // get the route's URL segment\n        const routeURL: string = child.snapshot.url.map((segment) => segment.path).join('/');\n        const display: boolean = !child.snapshot.data.hasOwnProperty(BREADCRUMB_DISPLAY) || child.snapshot.data[BREADCRUMB_DISPLAY];\n\n        // verify the custom data property \"breadcrumb\" is specified on the route\n        if (display && child.snapshot.data.hasOwnProperty(BREADCRUMB_NAME) && child.component !== undefined) {\n\n          // append route URL to URL\n          path += `/${routeURL}`;\n\n          // add breadcrumb\n          const breadcrumb: Breadcrumb = {\n            label: child.snapshot.data[BREADCRUMB_NAME],\n            url: path\n          };\n\n          breadcrumbs.push(breadcrumb);\n        }\n\n        return this.getBreadcrumbs(child, path, breadcrumbs);\n      }\n    }\n\n    // we should never get here, but just in case\n    return breadcrumbs;\n  }\n\n}\n","<nav aria-label=\"breadcrumb\">\n  <ol class=\"breadcrumb\">\n    <li class=\"breadcrumb-item\" *ngIf=\"breadcrumbs.length > 0\" >\n        <a class=\"fleche-back d-flex align-items-center\" [hidden]=\"breadcrumbs.length === 0\" (click)=\"goToPreviousBreadCrumbLevel()\"><i class=\"icon-b_left_arrow\"></i></a>\n    </li>\n    <li class=\"breadcrumb-item\">\n        <a class=\"underline\" [hidden]=\"breadcrumbs.length === 0\" routerLink=\"\"><u>{{ labelFirstItem }}</u></a>\n        <span [hidden]=\"breadcrumbs.length > 0\"></span>\n    </li>\n    <li class=\"breadcrumb-item\" [ngClass]=\"{ 'active': last}\" *ngFor=\"let breadcrumb of breadcrumbs;  let last = last\">\n        <a [hidden]=\"last\" [routerLink]=\"[breadcrumb.url]\" class=\"underline\"><u>{{breadcrumb.label }}</u></a>\n        <span [hidden]=\"!last\">{{breadcrumb.label }}</span>\n    </li>\n  </ol>\n</nav>\n","import { NgModule } from '@angular/core';\nimport { BreadcrumbComponent } from './breadcrumb.component';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule\n  ],\n  declarations: [BreadcrumbComponent],\n  exports: [BreadcrumbComponent]\n})\nexport class BreadcrumbModule { }\n","/*\n * Public API Surface of breadcrumb\n */\n\nexport * from './lib/breadcrumb.service';\nexport * from './lib/breadcrumb.component';\nexport * from './lib/breadcrumb.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;;MAKa,iBAAiB,CAAA;AAE5B,IAAA,WAAA,GAAA,GAAiB;;8GAFN,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;AAAjB,iBAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,iBAAiB,cAFhB,MAAM,EAAA,CAAA,CAAA;2FAEP,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAH7B,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;iBACnB,CAAA;;;MCYY,mBAAmB,CAAA;AAO9B,IAAA,WAAA,CACU,cAA8B,EAC9B,MAAc,EACd,SAAmB,EAAA;AAFnB,QAAA,IAAc,CAAA,cAAA,GAAd,cAAc,CAAgB;AAC9B,QAAA,IAAM,CAAA,MAAA,GAAN,MAAM,CAAQ;AACd,QAAA,IAAS,CAAA,SAAA,GAAT,SAAS,CAAU;AAP7B,QAAA,IAAc,CAAA,cAAA,GAAG,SAAS,CAAC;AASzB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KACvB;IAED,QAAQ,GAAA;;QAEN,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CACtB,MAAM,CAAC,IAAI,CAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,KAAY,KAAK,KAAK,YAAY,aAAa,CAAC,CAAC;AACnF,aAAA,SAAS,CAAC,CAAC,KAAK,KAAI;;AAGnB,YAAA,MAAM,IAAI,GAAmB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;YACtD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AAC/C,SAAC,CAAC,CAAC;KACJ;IAED,2BAA2B,GAAA;;QAEzB,MAAM,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAE;QACrD,IAAK,eAAe,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5B,SAAA;AAAI,aAAA;AACH,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC/D,SAAA;KACJ;IAES,cAAc,CAAC,KAAqB,EAAE,IAAI,GAAG,EAAE,EAAE,cAA4B,EAAE,EAAA;;AAErF,QAAA,MAAM,QAAQ,GAAqB,KAAK,CAAC,QAAQ,CAAC;QAClD,MAAM,eAAe,GAAG,WAAW,CAAC;QACpC,MAAM,kBAAkB,GAAG,YAAY,CAAC;;AAGxC,QAAA,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACvB,YAAA,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE;;AAE5B,gBAAA,IAAI,KAAK,CAAC,MAAM,KAAK,cAAc,EAAE;oBACnC,SAAS;AACV,iBAAA;;gBAGD,MAAM,QAAQ,GAAW,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACrF,MAAM,OAAO,GAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;;AAG5H,gBAAA,IAAI,OAAO,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,SAAS,KAAK,SAAS,EAAE;;AAGnG,oBAAA,IAAI,IAAI,CAAA,CAAA,EAAI,QAAQ,CAAA,CAAE,CAAC;;AAGvB,oBAAA,MAAM,UAAU,GAAe;wBAC7B,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;AAC3C,wBAAA,GAAG,EAAE,IAAI;qBACV,CAAC;AAEF,oBAAA,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC9B,iBAAA;gBAED,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;AACtD,aAAA;AACF,SAAA;;AAGD,QAAA,OAAO,WAAW,CAAC;KACpB;;gHA5EU,mBAAmB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,cAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,MAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,QAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAnB,mBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,mBAAmB,oGChBhC,o3BAeA,EAAA,MAAA,EAAA,CAAA,2sBAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,CAAA,OAAA,EAAA,SAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA,CAAA,SAAA,EAAA,cAAA,EAAA,eAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,kBAAA,EAAA,QAAA,EAAA,gCAAA,EAAA,MAAA,EAAA,CAAA,QAAA,EAAA,aAAA,EAAA,UAAA,EAAA,qBAAA,EAAA,kBAAA,EAAA,oBAAA,EAAA,YAAA,EAAA,OAAA,EAAA,YAAA,EAAA,YAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA;2FDCa,mBAAmB,EAAA,UAAA,EAAA,CAAA;kBAL/B,SAAS;+BACE,gBAAgB,EAAA,QAAA,EAAA,o3BAAA,EAAA,MAAA,EAAA,CAAA,2sBAAA,CAAA,EAAA,CAAA;iJAO1B,cAAc,EAAA,CAAA;sBADb,KAAK;;;MELK,gBAAgB,CAAA;;6GAAhB,gBAAgB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;8GAAhB,gBAAgB,EAAA,YAAA,EAAA,CAHZ,mBAAmB,CAAA,EAAA,OAAA,EAAA,CAHhC,YAAY;QACZ,YAAY,aAGJ,mBAAmB,CAAA,EAAA,CAAA,CAAA;AAElB,gBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,gBAAgB,YANzB,YAAY;QACZ,YAAY,CAAA,EAAA,CAAA,CAAA;2FAKH,gBAAgB,EAAA,UAAA,EAAA,CAAA;kBAR5B,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,OAAO,EAAE;wBACP,YAAY;wBACZ,YAAY;AACb,qBAAA;oBACD,YAAY,EAAE,CAAC,mBAAmB,CAAC;oBACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;iBAC/B,CAAA;;;ACZD;;AAEG;;ACFH;;AAEG;;;;"}