import { Component, Input } from '@angular/core';
import { NavigationEnd, PRIMARY_OUTLET } from '@angular/router';
import { filter } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@angular/common";
export class BreadcrumbComponent {
    constructor(activatedRoute, router, _location) {
        this.activatedRoute = activatedRoute;
        this.router = router;
        this._location = _location;
        this.labelFirstItem = 'Accueil';
        this.breadcrumbs = [];
    }
    ngOnInit() {
        // subscribe to the NavigationEnd event
        this.router.events.pipe(filter.call(this.router.events, (event) => event instanceof NavigationEnd))
            .subscribe((event) => {
            // set breadcrumbs
            const root = this.activatedRoute.root;
            this.breadcrumbs = this.getBreadcrumbs(root);
        });
    }
    goToPreviousBreadCrumbLevel() {
        // the last element is the current url, the one before is the previous url
        const currentUrlIndex = this.breadcrumbs.length - 2;
        if (currentUrlIndex < 0) {
            this.router.navigate(['']);
        }
        else {
            this.router.navigate([this.breadcrumbs[currentUrlIndex].url]);
        }
    }
    getBreadcrumbs(route, path = '', breadcrumbs = []) {
        // get the child routes
        const children = route.children;
        const BREADCRUMB_NAME = 'pageTitle';
        const BREADCRUMB_DISPLAY = 'breadcrumb';
        // iterate over each children
        if (children.length > 0) {
            for (const child of children) {
                // verify primary route
                if (child.outlet !== PRIMARY_OUTLET) {
                    continue;
                }
                // get the route's URL segment
                const routeURL = child.snapshot.url.map((segment) => segment.path).join('/');
                const display = !child.snapshot.data.hasOwnProperty(BREADCRUMB_DISPLAY) || child.snapshot.data[BREADCRUMB_DISPLAY];
                // verify the custom data property "breadcrumb" is specified on the route
                if (display && child.snapshot.data.hasOwnProperty(BREADCRUMB_NAME) && child.component !== undefined) {
                    // append route URL to URL
                    path += `/${routeURL}`;
                    // add breadcrumb
                    const breadcrumb = {
                        label: child.snapshot.data[BREADCRUMB_NAME],
                        url: path
                    };
                    breadcrumbs.push(breadcrumb);
                }
                return this.getBreadcrumbs(child, path, breadcrumbs);
            }
        }
        // we should never get here, but just in case
        return breadcrumbs;
    }
}
BreadcrumbComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.0", ngImport: i0, type: BreadcrumbComponent, deps: [{ token: i1.ActivatedRoute }, { token: i1.Router }, { token: i2.Location }], target: i0.ɵɵFactoryTarget.Component });
BreadcrumbComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.0", type: BreadcrumbComponent, selector: "lib-breadcrumb", inputs: { labelFirstItem: "labelFirstItem" }, ngImport: i0, template: "<nav aria-label=\"breadcrumb\">\n  <ol class=\"breadcrumb\">\n    <li class=\"breadcrumb-item\" *ngIf=\"breadcrumbs.length > 0\" >\n        <a class=\"fleche-back d-flex align-items-center\" [hidden]=\"breadcrumbs.length === 0\" (click)=\"goToPreviousBreadCrumbLevel()\"><i class=\"icon-b_left_arrow\"></i></a>\n    </li>\n    <li class=\"breadcrumb-item\">\n        <a class=\"underline\" [hidden]=\"breadcrumbs.length === 0\" routerLink=\"\"><u>{{ labelFirstItem }}</u></a>\n        <span [hidden]=\"breadcrumbs.length > 0\"></span>\n    </li>\n    <li class=\"breadcrumb-item\" [ngClass]=\"{ 'active': last}\" *ngFor=\"let breadcrumb of breadcrumbs;  let last = last\">\n        <a [hidden]=\"last\" [routerLink]=\"[breadcrumb.url]\" class=\"underline\"><u>{{breadcrumb.label }}</u></a>\n        <span [hidden]=\"!last\">{{breadcrumb.label }}</span>\n    </li>\n  </ol>\n</nav>\n", styles: [".breadcrumb{background-color:transparent;font-size:1.214rem;line-height:1.786rem}.breadcrumb .icon-fleche_g_d:before{color:#dd3810}.breadcrumb .icon-fleche_g_d{transform:rotate(180deg)}.breadcrumb-item{display:block}.breadcrumb-item+.breadcrumb-item:before{content:none}.breadcrumb-item+.breadcrumb-item{padding:0}.breadcrumb-item+.breadcrumb-item:nth-child(n+3):before{content:\" > \";color:#000;white-space:pre;padding:0}.breadcrumb-item a{color:#2462bc}.breadcrumb-item+.active{color:#000}.breadcrumb-item:first-child{height:1.214rem}.breadcrumb-item:nth-child(2){padding-left:1rem!important}.fleche-back{text-decoration:none!important}.fleche-back .icon-b_left_arrow:before{color:#dd3810;font-size:1.857rem}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.RouterLinkWithHref, selector: "a[routerLink],area[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo", "routerLink"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.0", ngImport: i0, type: BreadcrumbComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-breadcrumb', template: "<nav aria-label=\"breadcrumb\">\n  <ol class=\"breadcrumb\">\n    <li class=\"breadcrumb-item\" *ngIf=\"breadcrumbs.length > 0\" >\n        <a class=\"fleche-back d-flex align-items-center\" [hidden]=\"breadcrumbs.length === 0\" (click)=\"goToPreviousBreadCrumbLevel()\"><i class=\"icon-b_left_arrow\"></i></a>\n    </li>\n    <li class=\"breadcrumb-item\">\n        <a class=\"underline\" [hidden]=\"breadcrumbs.length === 0\" routerLink=\"\"><u>{{ labelFirstItem }}</u></a>\n        <span [hidden]=\"breadcrumbs.length > 0\"></span>\n    </li>\n    <li class=\"breadcrumb-item\" [ngClass]=\"{ 'active': last}\" *ngFor=\"let breadcrumb of breadcrumbs;  let last = last\">\n        <a [hidden]=\"last\" [routerLink]=\"[breadcrumb.url]\" class=\"underline\"><u>{{breadcrumb.label }}</u></a>\n        <span [hidden]=\"!last\">{{breadcrumb.label }}</span>\n    </li>\n  </ol>\n</nav>\n", styles: [".breadcrumb{background-color:transparent;font-size:1.214rem;line-height:1.786rem}.breadcrumb .icon-fleche_g_d:before{color:#dd3810}.breadcrumb .icon-fleche_g_d{transform:rotate(180deg)}.breadcrumb-item{display:block}.breadcrumb-item+.breadcrumb-item:before{content:none}.breadcrumb-item+.breadcrumb-item{padding:0}.breadcrumb-item+.breadcrumb-item:nth-child(n+3):before{content:\" > \";color:#000;white-space:pre;padding:0}.breadcrumb-item a{color:#2462bc}.breadcrumb-item+.active{color:#000}.breadcrumb-item:first-child{height:1.214rem}.breadcrumb-item:nth-child(2){padding-left:1rem!important}.fleche-back{text-decoration:none!important}.fleche-back .icon-b_left_arrow:before{color:#dd3810;font-size:1.857rem}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ActivatedRoute }, { type: i1.Router }, { type: i2.Location }]; }, propDecorators: { labelFirstItem: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJlYWRjcnVtYi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hY29zcy9icmVhZGNydW1iLWFuZ3VsYXItaW50cmFuZXQvc3JjL2xpYi9icmVhZGNydW1iLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2Fjb3NzL2JyZWFkY3J1bWItYW5ndWxhci1pbnRyYW5ldC9zcmMvbGliL2JyZWFkY3J1bWIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUEwQixhQUFhLEVBQUUsY0FBYyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDeEYsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7O0FBY3hDLE1BQU0sT0FBTyxtQkFBbUI7SUFPOUIsWUFDVSxjQUE4QixFQUM5QixNQUFjLEVBQ2QsU0FBbUI7UUFGbkIsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxjQUFTLEdBQVQsU0FBUyxDQUFVO1FBUDdCLG1CQUFjLEdBQUcsU0FBUyxDQUFDO1FBU3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxRQUFRO1FBQ04sdUNBQXVDO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDdEIsTUFBTSxDQUFDLElBQUksQ0FBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQVksRUFBRSxFQUFFLENBQUMsS0FBSyxZQUFZLGFBQWEsQ0FBQyxDQUFDO2FBQ25GLFNBQVMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBRW5CLGtCQUFrQjtZQUNsQixNQUFNLElBQUksR0FBbUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUM7WUFDdEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9DLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELDJCQUEyQjtRQUN6QiwwRUFBMEU7UUFDMUUsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFFO1FBQ3JELElBQUssZUFBZSxHQUFHLENBQUMsRUFBRTtZQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDNUI7YUFBSTtZQUNILElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQy9EO0lBQ0wsQ0FBQztJQUVTLGNBQWMsQ0FBQyxLQUFxQixFQUFFLElBQUksR0FBRyxFQUFFLEVBQUUsY0FBNEIsRUFBRTtRQUNyRix1QkFBdUI7UUFDdkIsTUFBTSxRQUFRLEdBQXFCLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDbEQsTUFBTSxlQUFlLEdBQUcsV0FBVyxDQUFDO1FBQ3BDLE1BQU0sa0JBQWtCLEdBQUcsWUFBWSxDQUFDO1FBRXhDLDZCQUE2QjtRQUM3QixJQUFJLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3ZCLEtBQUssTUFBTSxLQUFLLElBQUksUUFBUSxFQUFFO2dCQUM1Qix1QkFBdUI7Z0JBQ3ZCLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxjQUFjLEVBQUU7b0JBQ25DLFNBQVM7aUJBQ1Y7Z0JBRUQsOEJBQThCO2dCQUM5QixNQUFNLFFBQVEsR0FBVyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3JGLE1BQU0sT0FBTyxHQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztnQkFFNUgseUVBQXlFO2dCQUN6RSxJQUFJLE9BQU8sSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLElBQUksS0FBSyxDQUFDLFNBQVMsS0FBSyxTQUFTLEVBQUU7b0JBRW5HLDBCQUEwQjtvQkFDMUIsSUFBSSxJQUFJLElBQUksUUFBUSxFQUFFLENBQUM7b0JBRXZCLGlCQUFpQjtvQkFDakIsTUFBTSxVQUFVLEdBQWU7d0JBQzdCLEtBQUssRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7d0JBQzNDLEdBQUcsRUFBRSxJQUFJO3FCQUNWLENBQUM7b0JBRUYsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztpQkFDOUI7Z0JBRUQsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUM7YUFDdEQ7U0FDRjtRQUVELDZDQUE2QztRQUM3QyxPQUFPLFdBQVcsQ0FBQztJQUNyQixDQUFDOztnSEE1RVUsbUJBQW1CO29HQUFuQixtQkFBbUIsb0dDaEJoQyxvM0JBZUE7MkZEQ2EsbUJBQW1CO2tCQUwvQixTQUFTOytCQUNFLGdCQUFnQjtpSkFPMUIsY0FBYztzQkFEYixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIsIEFjdGl2YXRlZFJvdXRlLCBOYXZpZ2F0aW9uRW5kLCBQUklNQVJZX09VVExFVCB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge0xvY2F0aW9ufSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5cbmludGVyZmFjZSBCcmVhZGNydW1iIHtcbiAgbGFiZWw6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1icmVhZGNydW1iJyxcbiAgdGVtcGxhdGVVcmwgOiBgLi9icmVhZGNydW1iLmNvbXBvbmVudC5odG1sYCxcbiAgc3R5bGVVcmxzOiBbJy4vYnJlYWRjcnVtYi5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEJyZWFkY3J1bWJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIEBJbnB1dCgpXG4gIGxhYmVsRmlyc3RJdGVtID0gJ0FjY3VlaWwnO1xuXG4gIHB1YmxpYyBicmVhZGNydW1iczogQnJlYWRjcnVtYltdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYWN0aXZhdGVkUm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBfbG9jYXRpb246IExvY2F0aW9uXG4gICkge1xuICAgIHRoaXMuYnJlYWRjcnVtYnMgPSBbXTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIC8vIHN1YnNjcmliZSB0byB0aGUgTmF2aWdhdGlvbkVuZCBldmVudFxuICAgIHRoaXMucm91dGVyLmV2ZW50cy5waXBlKFxuICAgICBmaWx0ZXIuY2FsbCggdGhpcy5yb3V0ZXIuZXZlbnRzLCAoZXZlbnQ6IEV2ZW50KSA9PiBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpKVxuICAgIC5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG5cbiAgICAgIC8vIHNldCBicmVhZGNydW1ic1xuICAgICAgY29uc3Qgcm9vdDogQWN0aXZhdGVkUm91dGUgPSB0aGlzLmFjdGl2YXRlZFJvdXRlLnJvb3Q7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhyb290KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdvVG9QcmV2aW91c0JyZWFkQ3J1bWJMZXZlbCgpOiB2b2lkIHtcbiAgICAvLyB0aGUgbGFzdCBlbGVtZW50IGlzIHRoZSBjdXJyZW50IHVybCwgdGhlIG9uZSBiZWZvcmUgaXMgdGhlIHByZXZpb3VzIHVybFxuICAgIGNvbnN0IGN1cnJlbnRVcmxJbmRleCA9IHRoaXMuYnJlYWRjcnVtYnMubGVuZ3RoIC0gMiA7XG4gICAgaWYgKCBjdXJyZW50VXJsSW5kZXggPCAwICl7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJyddKTtcbiAgICB9ZWxzZXtcbiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFt0aGlzLmJyZWFkY3J1bWJzW2N1cnJlbnRVcmxJbmRleF0udXJsXSk7XG4gICAgfVxufVxuXG4gIHByaXZhdGUgZ2V0QnJlYWRjcnVtYnMocm91dGU6IEFjdGl2YXRlZFJvdXRlLCBwYXRoID0gJycsIGJyZWFkY3J1bWJzOiBCcmVhZGNydW1iW10gPSBbXSk6IEJyZWFkY3J1bWJbXSB7XG4gICAgLy8gZ2V0IHRoZSBjaGlsZCByb3V0ZXNcbiAgICBjb25zdCBjaGlsZHJlbjogQWN0aXZhdGVkUm91dGVbXSA9IHJvdXRlLmNoaWxkcmVuO1xuICAgIGNvbnN0IEJSRUFEQ1JVTUJfTkFNRSA9ICdwYWdlVGl0bGUnO1xuICAgIGNvbnN0IEJSRUFEQ1JVTUJfRElTUExBWSA9ICdicmVhZGNydW1iJztcblxuICAgIC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGNoaWxkcmVuXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgLy8gdmVyaWZ5IHByaW1hcnkgcm91dGVcbiAgICAgICAgaWYgKGNoaWxkLm91dGxldCAhPT0gUFJJTUFSWV9PVVRMRVQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldCB0aGUgcm91dGUncyBVUkwgc2VnbWVudFxuICAgICAgICBjb25zdCByb3V0ZVVSTDogc3RyaW5nID0gY2hpbGQuc25hcHNob3QudXJsLm1hcCgoc2VnbWVudCkgPT4gc2VnbWVudC5wYXRoKS5qb2luKCcvJyk7XG4gICAgICAgIGNvbnN0IGRpc3BsYXk6IGJvb2xlYW4gPSAhY2hpbGQuc25hcHNob3QuZGF0YS5oYXNPd25Qcm9wZXJ0eShCUkVBRENSVU1CX0RJU1BMQVkpIHx8IGNoaWxkLnNuYXBzaG90LmRhdGFbQlJFQURDUlVNQl9ESVNQTEFZXTtcblxuICAgICAgICAvLyB2ZXJpZnkgdGhlIGN1c3RvbSBkYXRhIHByb3BlcnR5IFwiYnJlYWRjcnVtYlwiIGlzIHNwZWNpZmllZCBvbiB0aGUgcm91dGVcbiAgICAgICAgaWYgKGRpc3BsYXkgJiYgY2hpbGQuc25hcHNob3QuZGF0YS5oYXNPd25Qcm9wZXJ0eShCUkVBRENSVU1CX05BTUUpICYmIGNoaWxkLmNvbXBvbmVudCAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAvLyBhcHBlbmQgcm91dGUgVVJMIHRvIFVSTFxuICAgICAgICAgIHBhdGggKz0gYC8ke3JvdXRlVVJMfWA7XG5cbiAgICAgICAgICAvLyBhZGQgYnJlYWRjcnVtYlxuICAgICAgICAgIGNvbnN0IGJyZWFkY3J1bWI6IEJyZWFkY3J1bWIgPSB7XG4gICAgICAgICAgICBsYWJlbDogY2hpbGQuc25hcHNob3QuZGF0YVtCUkVBRENSVU1CX05BTUVdLFxuICAgICAgICAgICAgdXJsOiBwYXRoXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGJyZWFkY3J1bWJzLnB1c2goYnJlYWRjcnVtYik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRCcmVhZGNydW1icyhjaGlsZCwgcGF0aCwgYnJlYWRjcnVtYnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdlIHNob3VsZCBuZXZlciBnZXQgaGVyZSwgYnV0IGp1c3QgaW4gY2FzZVxuICAgIHJldHVybiBicmVhZGNydW1icztcbiAgfVxuXG59XG4iLCI8bmF2IGFyaWEtbGFiZWw9XCJicmVhZGNydW1iXCI+XG4gIDxvbCBjbGFzcz1cImJyZWFkY3J1bWJcIj5cbiAgICA8bGkgY2xhc3M9XCJicmVhZGNydW1iLWl0ZW1cIiAqbmdJZj1cImJyZWFkY3J1bWJzLmxlbmd0aCA+IDBcIiA+XG4gICAgICAgIDxhIGNsYXNzPVwiZmxlY2hlLWJhY2sgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiIFtoaWRkZW5dPVwiYnJlYWRjcnVtYnMubGVuZ3RoID09PSAwXCIgKGNsaWNrKT1cImdvVG9QcmV2aW91c0JyZWFkQ3J1bWJMZXZlbCgpXCI+PGkgY2xhc3M9XCJpY29uLWJfbGVmdF9hcnJvd1wiPjwvaT48L2E+XG4gICAgPC9saT5cbiAgICA8bGkgY2xhc3M9XCJicmVhZGNydW1iLWl0ZW1cIj5cbiAgICAgICAgPGEgY2xhc3M9XCJ1bmRlcmxpbmVcIiBbaGlkZGVuXT1cImJyZWFkY3J1bWJzLmxlbmd0aCA9PT0gMFwiIHJvdXRlckxpbms9XCJcIj48dT57eyBsYWJlbEZpcnN0SXRlbSB9fTwvdT48L2E+XG4gICAgICAgIDxzcGFuIFtoaWRkZW5dPVwiYnJlYWRjcnVtYnMubGVuZ3RoID4gMFwiPjwvc3Bhbj5cbiAgICA8L2xpPlxuICAgIDxsaSBjbGFzcz1cImJyZWFkY3J1bWItaXRlbVwiIFtuZ0NsYXNzXT1cInsgJ2FjdGl2ZSc6IGxhc3R9XCIgKm5nRm9yPVwibGV0IGJyZWFkY3J1bWIgb2YgYnJlYWRjcnVtYnM7ICBsZXQgbGFzdCA9IGxhc3RcIj5cbiAgICAgICAgPGEgW2hpZGRlbl09XCJsYXN0XCIgW3JvdXRlckxpbmtdPVwiW2JyZWFkY3J1bWIudXJsXVwiIGNsYXNzPVwidW5kZXJsaW5lXCI+PHU+e3ticmVhZGNydW1iLmxhYmVsIH19PC91PjwvYT5cbiAgICAgICAgPHNwYW4gW2hpZGRlbl09XCIhbGFzdFwiPnt7YnJlYWRjcnVtYi5sYWJlbCB9fTwvc3Bhbj5cbiAgICA8L2xpPlxuICA8L29sPlxuPC9uYXY+XG4iXX0=