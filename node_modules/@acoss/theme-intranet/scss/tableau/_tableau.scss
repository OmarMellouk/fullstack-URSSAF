/* ==========================================================================
== theme ag-grid
========================================================================== */
@import "~ag-grid-community/dist/styles/ag-grid.css";
@import "~ag-grid-community/dist/styles/ag-theme-alpine.css";

// Font du tableau
.ag-theme-alpine, .ag-theme-alpine .ag-row {
  font: 400 0.929rem "Segoe UI", sans-serif; // 13px
}

// Hauteur minimal du tableau définie sur une ligne
.ag-theme-alpine .ag-layout-auto-height .ag-center-cols-clipper,
.ag-theme-alpine .ag-layout-auto-height .ag-center-cols-container,
.ag-theme-alpine .ag-layout-print .ag-center-cols-clipper,
.ag-theme-alpine .ag-layout-print .ag-center-cols-container {
  min-height: 2.286rem;// 32px
}

// Pas de bordure sur le header
.ag-theme-alpine .ag-header-row:not(:first-child) .ag-header-cell,
.ag-theme-alpine .ag-header-row:not(:first-child) .ag-header-group-cell.ag-header-group-cell-with-group {
  border-top: none;
}

// Bordure en bas des entêtes de multi-header
.ag-theme-alpine .ag-header-group-cell-with-group {
  border-bottom: 0.071rem solid $white; // 1px
}

// Contenu header du tableau
.ag-theme-alpine .ag-header-cell, .ag-theme-alpine .ag-header-group-cell {
  padding-left: 0.286rem; // 4px
  padding-right: 0.357rem; // 5px
  line-height: 1.143rem; // 16px
  background-color: $tableau-bg;
  color: $noir;
  font-weight: 600;
  border-right: 0.071rem solid $white; // 1px

  // Pas de bordure blanche pour le dernier enfant
  &:last-child {
    border-right: none;
  }
}

// Masque la bordure droite du header pour coller les deux actions renderers
.ag-theme-alpine .ag-header-cell.no-border {
  border-right: transparent;
}

// Header d'une colonne triée
.ag-theme-alpine .ag-header-cell[aria-sort="descending"], .ag-theme-alpine .ag-header-cell[aria-sort="ascending"] {
  background-color: $tableau-bg-filtered;
}

// Filtres
.ag-theme-alpine .ag-floating-filter {
  background-color: $white;
  padding: 0 0.071rem; // 1px

  // L'input prend toute la largeur
  select.form-select, input.form-control {
    width: 100%;
    margin-top: 0;
  }

  // Le date input prend toute la largeur
  .date-input-container {
    width: 100%;
  }

  // Icône calendrier
  .date-input-container .date-input-img {
    top: 0.214rem; // 3px
    right: 0.286rem; // 4px
  }
}

// Container du tableau
.ag-theme-alpine .ag-root-wrapper {
  border-color: $tableau-bg;
  border-top: 0;
  border-radius: 0.143rem; // 2px
}

// Header du tableau
.ag-theme-alpine .ag-header {
  border: 0;
}

// Ligne paire
.ag-theme-alpine .ag-row-even {
  background-color: $tableau-bg-grey;
  border: none;
}

// Ligne impaire
.ag-theme-alpine .ag-row-odd {
  background-color: $white;
  border: none;
}

// Ligne hover / selectionnée
.ag-theme-alpine .ag-row-hover, .ag-theme-alpine .ag-row-selected {
  background-color: $tableau-bg-hover;

  &::before {
    content: none;
  }
}
.ag-theme-alpine .ag-row-hover.ag-row-selected::before {
  background: none;
}
.ag-theme-alpine .ag-row-hover:not(.ag-full-width-row)::before, .ag-theme-alpine .ag-row-hover.ag-full-width-row.ag-row-group::before {
  background: none;
}

// Cellules du tableau
.ag-theme-alpine .ag-cell {
  padding-left: 0.5rem; // 7px
  padding-right: 0.5rem; // 7px
  // request MOE 479044
  display: flex;
  align-items: center;
}

.ag-theme-alpine .no-rows {
  margin-top: 0.571rem; // 8px
}

// Texte du header
.ag-theme-alpine .ag-header-cell-text {
  white-space: normal;
  width: 100%;
}

// Texte d'une cellule
.ag-theme-alpine .ag-ltr .ag-cell {
  white-space: normal;
  line-height: 0.929rem; // 13px
  border-bottom: none;
  border-top: none;
}

// Select row
.ag-theme-alpine .ag-ltr .ag-has-focus .ag-cell-focus:not(.ag-cell-range-selected),
.ag-theme-alpine .ag-ltr .ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),
.ag-theme-alpine .ag-ltr .ag-has-focus .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,
.ag-theme-alpine .ag-ltr .ag-cell-range-single-cell,
.ag-theme-alpine .ag-ltr .ag-cell-range-single-cell.ag-cell-range-handle,
.ag-theme-alpine .ag-rtl .ag-has-focus .ag-cell-focus:not(.ag-cell-range-selected),
.ag-theme-alpine .ag-rtl .ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),
.ag-theme-alpine .ag-rtl .ag-has-focus .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,
.ag-theme-alpine .ag-rtl .ag-cell-range-single-cell,
.ag-theme-alpine .ag-rtl .ag-cell-range-single-cell.ag-cell-range-handle {
  border-color: $noir;
}

.ag-theme-alpine .ag-row-pinned {
  background-color: $tableau-total;
}

.ag-theme-alpine .ag-floating-bottom {
  border-top: 0.143rem solid $tableau-border-grey; // 2px
}

.ag-theme-alpine .custom-column-header {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: normal;
  margin: auto 0;
}

.ag-theme-alpine .white-space-pre-wrap .custom-column-header {
  white-space: pre-wrap;
}

.ag-theme-alpine a {
  text-decoration: none;
  font-weight: 700;

  &:hover {
    text-decoration: underline;
  }
}

/** Pagination **/

.ag-pagination {
  height: 2.857rem; // 40px
  border: 0.071rem solid $tableau-bg; // 1px
  border-top: 0.143rem solid $tableau-border-grey;
  // Masque la bordure du tableau
  position: relative;
  top: -0.071rem; // -1px
  background-color: $white;

  .lignes-label, .lignes-total-label {
    font-size: 1rem; // 14px
    margin: auto 0.5rem; // 7px 
  }

  .lignes-label {
    color: $noir;
  }

  .lignes-total-label {
    margin-left: 3.5rem; // 49px
  }   

  .lignes-label-value {
    width: 4rem; // 56px
    margin: auto 0;
  }

  .page-container {
    margin: auto;
    margin-right: 0.5rem; // 7px
    display: flex;
  }

  input.form-control {
    width: 2.286rem; // 32px
    text-align: center;
    margin-top: 0;
  }

  .page-label {
    margin: 0 0.357rem; // 5px
    color: $noir;
  }

  .total-pages-value {
    margin-right: 0.357rem; // 5px
    margin-left: 0.214rem; // 3px
  }

  .disabled {
    opacity: 0.4;
  }

  .icon-b_full_right, .icon-b_full_left {
    font-size: 1.286rem;// 18px
    position: relative;
    top: 0.071rem; // 1px
  }

  .icon-b_left, .icon-b_right {
    font-size: 1.286rem;// 18px
    padding: 0 0.286rem; // 4px
    position: relative;
    top: 0.071rem; // 1px
  }
}

// Supprime la bordure top de la pagination
.has-total-row {
  .ag-pagination {
    border-top: 0.071rem solid $tableau-bg; // 1px
  }
}

.ag-theme-alpine .header-text-center .ag-header-group-cell-label {
  justify-content: center;
}

/** ICÔNES DE TRI, FILTRAGE ET EXPAND/CLOPASSE **/

// Styles pour les icônes pour tirer les colonnes
.ag-theme-alpine .ag-icon-none {
  background: url("~/node_modules/@acoss/icones/assets/icones-showcase/sort_none.svg") !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-size: 2.143rem 2.143rem !important; // 30px
  height: 1.429rem; // 20px
  width: 1rem; // 14px
}

.ag-theme-alpine .ag-icon-asc {
  background: url("~/node_modules/@acoss/icones/assets/icones-showcase/sort_up.svg") !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-size: 2.143rem 2.143rem !important; // 30px
  height: 1.429rem; // 20px
  width: 1rem; // 14px
}

.ag-theme-alpine .ag-icon-desc {
  background: url("~/node_modules/@acoss/icones/assets/icones-showcase/sort_down.svg") !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-size: 2.143rem 2.143rem !important; // 30px
  height: 1.429rem; // 20px
  width: 1rem; // 14px
}

// Supprime les marges sur les icônes dans l'header par défaut
.ag-theme-alpine .ag-header-icon .ag-icon-none,
.ag-theme-alpine .ag-header-icon .ag-icon-asc,
.ag-theme-alpine .ag-header-icon .ag-icon-desc,
.ag-theme-alpine .ag-header-icon .g-icon-filter {
  margin-left: 0;
  margin-top: 0;
}

// Icône de filtrage
.ag-theme-alpine .ag-icon.ag-icon-filter {
  font-size: 1.714rem; // 24px
  margin-top: 0.143rem; // 2px
  cursor: initial;
  color: $tableau-icone
}

// Container de l'header custom des icônes
.ag-theme-alpine .ag-header-icon-container {
  display: flex;
  margin: auto;
  margin-right: 0;
}

//supprimer content ajoute par le theme ag-theme-alpine
.ag-theme-alpine .ag-icon-desc:before, .ag-theme-alpine .ag-icon-asc:before, .ag-theme-alpine .ag-icon-none:before, .ag-icon-tree-closed:before, .ag-icon-tree-open:before {
  content: none !important;
}

// Icône expand/collapse
.ag-theme-alpine .ag-icon-tree-closed {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg version='1.1' id='Calque_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 43.869 43.124' enable-background='new 0 0 43.869 43.124' xml:space='preserve'%3e%3cg%3e%3cpath fill='%23384A6D' d='M40.63,0H3.239c-1.791,0-3.24,1.449-3.24,3.238v36.645c0,1.789,1.449,3.24,3.24,3.24H40.63 c1.789,0,3.238-1.451,3.238-3.24V3.239C43.869,1.45,42.419,0,40.63,0z M37.389,36.644H6.477V6.479h30.912V36.644z'/%3e%3cpath fill='%23384A6D' d='M12.879,24.8h5.814v5.815c0,1.788,1.451,3.239,3.24,3.239c1.788,0,3.239-1.451,3.239-3.239V24.8h5.814 c1.789,0,3.24-1.45,3.24-3.24c0-1.787-1.451-3.239-3.24-3.239h-5.814v-5.814c0-1.789-1.451-3.24-3.239-3.24 c-1.789,0-3.24,1.451-3.24,3.24v5.814h-5.814c-1.79,0-3.24,1.452-3.24,3.239C9.639,23.35,11.089,24.8,12.879,24.8z'/%3e%3c/g%3e%3c/svg%3e") !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-size: 1.143rem 1.143rem; // 16px
  height: 1.143rem; // 16px
  width: 1.143rem; // 16px
}

// Icône expand/collapse
.ag-theme-alpine .ag-icon-tree-open {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg version='1.1' id='Calque_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 43.869 43.124' enable-background='new 0 0 43.869 43.124' xml:space='preserve'%3e%3cg%3e%3cpath fill='%23384A6D' d='M40.965,0.741H3.576c-1.791,0-3.24,1.45-3.24,3.239v36.643c0,1.789,1.449,3.24,3.24,3.24h37.389 c1.789,0,3.24-1.451,3.24-3.24V3.98C44.206,2.191,42.754,0.741,40.965,0.741z M37.727,37.383H6.814V7.221h30.913V37.383z'/%3e%3cpath fill='%23384A6D' d='M13.217,25.542h18.108c1.789,0,3.24-1.451,3.24-3.241c0-1.787-1.451-3.239-3.24-3.239H13.217 c-1.79,0-3.24,1.452-3.24,3.239C9.977,24.09,11.427,25.542,13.217,25.542z'/%3e%3c/g%3e%3c/svg%3e") !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-size: 1.143rem 1.143rem; // 16px
  height: 1.143rem; // 16px
  width: 1.143rem; // 16px
}

// Icône expand/collapse all
.ag-theme-alpine .icon-b_all_plus, .ag-theme-alpine .icon-b_all_minus {
  font-size: 1.286rem; // 18px
  cursor: pointer;
}

// Tableau imbriqué
.ag-theme-alpine .ag-details-row {
  padding: 0.929rem 2.286rem; // 13px 32px
}

// Masque les valeurs de la première colonne pour un tableau dépliable
.ag-theme-alpine span.ag-group-value, .ag-theme-alpine span.ag-group-child-count {
  display: none !important;
}

/** EDITION **/
.ag-theme-alpine {
  // Champ date
  .date-input-container {
    width: 100%;

    .datepicker-input {
      width: 100%;
    }

    .date-input-img {
      right: 0.286rem; // 4px
    }
  }
}

// Icône supprimer ligne, icône modifier ligne
.ag-theme-alpine .icon-b_delete, .ag-theme-alpine .icon-b_modify {
  cursor: pointer;
}

// Pas de shadow pour les cellules en édition via tab, il y a déjà le cadre du tableau
.ag-cell-value .form-control:focus {
  box-shadow: none;
}

.tableau-edit-buttons {
  height: 2.286rem; // 32px
}

/** CHECKBOXES **/

.ag-theme-alpine .hide-checkbox .ag-header-select-all {
  display: none;
}

// Alignement de la checkbox du header
.ag-theme-alpine .ag-header-select-all {
  margin-left: 0.357rem; // 5px
}

// Custom style pour les checkboxes
.ag-theme-alpine .ag-selection-checkbox {
  margin: 0.143rem; // 2px
}

// Container de la checkbox
.ag-theme-alpine .ag-checkbox-input-wrapper {
  font-size: 0.929rem; // 13px
  width: 1.214rem; // 17px
  height: 1.214rem; // 17px
}

// Affiche la checkbox custom
.ag-theme-alpine .ag-checkbox-input-wrapper:before {
  border-radius: 0.143rem; // 2px
  width: 1.214rem; // 17px
  height: 1.214rem; // 17px
  background-color: $blanc;
  border: 0.071rem solid $checkbox-radio-border; // 1px
  content: ' ';
  display: block;
  position: absolute;
}

// Supprime la checkbox d'ag grid
.ag-theme-alpine .ag-checkbox-input-wrapper:after, .ag-theme-alpine .ag-checkbox-input-wrapper.ag-indeterminate:after {
  content: none;
}

// Supprime le box-shadow d'ag grid
.ag-theme-alpine .ag-checkbox-input-wrapper:focus-within, .ag-theme-alpine .ag-checkbox-input-wrapper:active {
  box-shadow: none;
}

// Ajoute le style focus-visible, s'affiche uniquement dans le cas de la tabulation
.ag-theme-alpine .ag-checkbox-input-wrapper:focus-visible:before {
  box-shadow: 0 0 0 0.2rem $focus;
  border-color: $radio-focus-border;
}

// Affiche la checkbox custom dans le cas où elle est sélectionnée
.ag-theme-alpine .ag-checkbox-input-wrapper.ag-checked:after {
  left: 0.143rem; // 2px
  top: 0.036rem; // 0.5px
  width: 0.929rem; // 13px
  height: 1.143rem; // 16px
  background: 100% no-repeat;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' id='Calque_1' focusable='false' viewBox='0 0 2.83 2.83' enable-background='new 0 0 2.83 2.83' xml:space='preserve'%3e%3cpath fill='%232462D5' d='M0.961,2.429l-0.92-0.92c-0.055-0.055-0.055-0.145,0-0.2l0.2-0.2c0.055-0.055,0.145-0.055,0.2,0l0.62,0.62 l1.326-1.327c0.057-0.055,0.146-0.055,0.201,0l0.199,0.2c0.056,0.055,0.056,0.145,0,0.2L1.161,2.429 C1.106,2.483,1.017,2.483,0.961,2.429z'/%3e%3c/svg%3e");
  content: ' '
}

.ag-theme-alpine [class^="icon-"], .ag-theme-alpine [class*=" icon-"] {
  font-size: 1.429rem; // 20px
  cursor: pointer;
}

.ag-theme-alpine .icon-error, .ag-theme-alpine .icon-warning {
  left: 0;
  font-size: 1.143rem;// 16px
  margin-left: 0.5rem; // 7px
  margin-right: 0.286rem; // 4px
}

.ag-theme-alpine .overflow-ellipsis {
  line-height: 2.071rem; // 29px
}

/** CONFIG **/

.colonnes-config-popup {
  .displayed-columns {
    margin-left: 0.813rem; // 11.375px
  }

  lib-double-liste .select-container:first-child {
    padding-left: 0;
  }
}

/** EXTRA **/

.display-warning-in-table {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 32 32' enable-background='new 0 0 32 32' xml:space='preserve'%3e%3cg%3e%3cpath fill='%23ff9000' d='M31.367 26.077l-12.65-23.286c-0.557-1.027-1.633-1.668-2.804-1.668v0c-1.17 0-2.246 0.641-2.804 1.668l-12.722 23.413c-0.538 0.989-0.514 2.187 0.061 3.155 0.575 0.967 1.617 1.56 2.743 1.56l25.443 0.002c0 0 0 0 0.001 0s0.002 0 0.003 0c1.762 0 3.19-1.428 3.19-3.191-0.001-0.605-0.168-1.171-0.461-1.653zM13.785 9.538c0-1.175 0.953-2.127 2.127-2.127 1.176 0 2.129 0.952 2.129 2.127v8.476c0 1.176-0.953 2.128-2.129 2.128-1.174 0-2.127-0.953-2.127-2.128v-8.476zM15.912 27.898c-1.176 0-2.129-0.954-2.129-2.132 0-1.176 0.954-2.129 2.129-2.129 1.177 0 2.131 0.954 2.131 2.129 0.001 1.178-0.953 2.132-2.131 2.132z'/%3e%3c/g%3e%3c/svg%3e") !important;
  background-position: right !important;
  background-repeat: no-repeat !important;
  background-size: 1.143rem 1.143rem; // 16px
  background-position-x: calc(100% - 0.5rem) !important; // 7px
  padding-right: 2.143rem !important; // 30px (16px icône + 7px default padding + 7px padding)
}