import { Component, Input } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
export class DoubleListeComponent {
    constructor(fb) {
        this.fb = fb;
        this.height = '100%';
        this.width = '100%';
        this._listeSource = [];
        /**
         * Liste destination, tableau de strings ou d'objets
         * En cas d'objet, définir la clef lockList à true permet d'empêcher un changement de liste
         */
        this.listeDestination = [];
        // Permet d'activer ou non le tri de la liste source
        this.sortSource = false;
        this.activateMoveToDestionationButton = false;
        this.activateMoveToSourceButton = false;
        this.activateDestinationButton = false;
        this.disabledMoveTopButton = false;
        this.disabledMoveBottomButton = false;
        this.doubleListeForm = this.fb.group({
            source: [],
            destination: []
        });
    }
    /**
     * Liste source, tableau de strings ou d'objets
     * En cas d'objet, définir la clef lockList à true permet d'empêcher un changement de liste
     */
    set listeSource(liste) {
        this._listeSource = liste;
        this.handleSort();
    }
    get listeSource() {
        this.handleSort();
        return this._listeSource;
    }
    ngOnInit() { }
    sourceSelect(event) {
        this.activateMoveToDestionationButton = this.listeSource.length > 0 &&
            this.doubleListeForm.value.source && this.doubleListeForm.value.source.length > 0;
        // Disable l'icône dans l'élément doit être verrouillé dans cette liste
        const index = event.target.index;
        if (this.listeSource[index]?.lockList) {
            this.activateMoveToDestionationButton = false;
        }
        this.activateMoveToSourceButton = false;
        this.activateDestinationButton = false;
    }
    destinationSelect(event) {
        this.activateDestinationButton = this.listeDestination.length > 1 &&
            this.doubleListeForm.value.destination && this.doubleListeForm.value.destination.length > 0;
        this.activateMoveToSourceButton = this.listeDestination.length > 0 &&
            this.doubleListeForm.value.destination && this.doubleListeForm.value.destination.length > 0;
        // Disable l'icône dans l'élément doit être verrouillé dans cette liste
        const index = event.target.index;
        if (this.listeDestination[index]?.lockList) {
            this.activateMoveToSourceButton = false;
        }
        this.activateMoveToDestionationButton = false;
        this.checkDestinationButtons();
    }
    moveAllToDestination() {
        const tmpList = [];
        this.listeSource.forEach((elem, index) => {
            if (!elem.lockList) {
                // Push les éléments pouvant être déplacés
                this.listeDestination.push(elem);
                // Garde en mémoire leur index pour suppression
                tmpList.push(index);
            }
        });
        // Supprime les éléments déplacés
        for (let i = tmpList.length - 1; i >= 0; i--) {
            this.listeSource.splice(tmpList[i], 1);
        }
        this.activateMoveToDestionationButton = false;
        this.activateMoveToSourceButton = false;
    }
    moveAllToSource() {
        const tmpList = [];
        this.listeDestination.forEach((elem, index) => {
            if (!elem.lockList) {
                // Push les éléments pouvant être déplacés
                this.listeSource.push(elem);
                // Garde en mémoire leur index pour suppression
                tmpList.push(index);
            }
        });
        // Supprime les éléments déplacés
        for (let i = tmpList.length - 1; i >= 0; i--) {
            this.listeDestination.splice(tmpList[i], 1);
        }
        this.handleSort();
        this.activateMoveToDestionationButton = false;
        this.activateMoveToSourceButton = false;
    }
    moveToDestionation() {
        this.move(this.doubleListeForm.value.source, this.listeSource, this.listeDestination);
        this.activateMoveToDestionationButton = false;
    }
    moveToSource() {
        this.move(this.doubleListeForm.value.destination, this.listeDestination, this.listeSource);
        this.activateMoveToSourceButton = false;
        this.handleSort();
    }
    move(formControl, source, dest) {
        formControl.forEach(value => {
            // Uniquement dans le cas où l'élément n'est pas verrouillé
            if (!value.lockList) {
                const index = source.indexOf(value);
                if (index >= 0) {
                    source.splice(index, 1).forEach(element => dest.push(element));
                }
            }
        });
        this.doubleListeForm.setValue({
            source: [],
            destination: []
        });
    }
    // pour vérifier si l'élément passé en paramètre est séléctionné ou pas
    isSelected(value) {
        let isSelected = false;
        if (this.doubleListeForm.value.destination.includes(value)) {
            isSelected = true;
        }
        return isSelected;
    }
    moveToBottom() {
        const iterationList = Array.from(this.listeDestination);
        iterationList.forEach(value => {
            if (this.isSelected(value)) {
                const index = this.listeDestination.indexOf(value);
                if (index >= 0 && index < this.listeDestination.length) {
                    this.listeDestination.splice(index, 1);
                    this.listeDestination.splice(this.listeDestination.length, 0, value);
                }
            }
        });
        this.checkDestinationButtons();
    }
    moveToTop() {
        const reversedList = Array.from(this.listeDestination).reverse();
        reversedList.forEach(value => {
            if (this.isSelected(value)) {
                const index = this.listeDestination.indexOf(value);
                if (index >= 0 && index < this.listeDestination.length) {
                    this.listeDestination.splice(index, 1);
                    this.listeDestination.splice(0, 0, value);
                }
            }
        });
        this.checkDestinationButtons();
    }
    moveOneStep(list) {
        list.forEach(value => {
            const i = list.indexOf(value);
            if (this.isSelected(value) && !this.isSelected(list[i - 1]) && i > 0) {
                const tmp = list[i - 1];
                list[i - 1] = list[i];
                list[i] = tmp;
            }
        });
    }
    moveUp() {
        this.moveOneStep(this.listeDestination);
        this.checkDestinationButtons();
    }
    moveDown() {
        this.moveOneStep(this.listeDestination.reverse());
        this.listeDestination.reverse();
        this.checkDestinationButtons();
    }
    /**
     * Effectue un tri de la liste source si le tri est activé
     */
    handleSort() {
        if (this.sortSource && this._listeSource !== undefined) {
            this._listeSource.sort((a, b) => {
                // Dans le cas d'un objet, utilise la clef voulue
                if (typeof a === 'object') {
                    return a[this.keyToDisplay].localeCompare(b[this.keyToDisplay], 'fr', { ignorePunctuation: true });
                }
                else {
                    return a.localeCompare(b, 'fr', { ignorePunctuation: true });
                }
            });
        }
    }
    /**
     * Vérifie à chaque mouvement de haut en bas, de bas en haut et à chaque sélection dans la liste de destination
     * Si les boutons haut/bas doivent être activé ou non
     */
    checkDestinationButtons() {
        const lastSelectedIndex = this.doubleListeForm.value.destination?.length - 1;
        const lastIndex = this.listeDestination.length - 1;
        // Vérifie si la première valeur de la sélection correspond à la première valeur de la liste
        if (this.doubleListeForm.value.destination && this.doubleListeForm.value.destination[0] === this.listeDestination[0]) {
            this.disabledMoveTopButton = true;
        }
        else {
            this.disabledMoveTopButton = false;
        }
        // Vérifie si la dernière valeur de la sélection correspond à la dernière valeur de la liste
        if (this.doubleListeForm.value.destination && this.doubleListeForm.value.destination[lastSelectedIndex] === this.listeDestination[lastIndex]) {
            this.disabledMoveBottomButton = true;
        }
        else {
            this.disabledMoveBottomButton = false;
        }
    }
}
DoubleListeComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.0", ngImport: i0, type: DoubleListeComponent, deps: [{ token: i1.UntypedFormBuilder }], target: i0.ɵɵFactoryTarget.Component });
DoubleListeComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.0", type: DoubleListeComponent, selector: "lib-double-liste", inputs: { height: "height", width: "width", listeSource: "listeSource", listeDestination: "listeDestination", sortSource: "sortSource", keyToDisplay: "keyToDisplay" }, ngImport: i0, template: "<div class=\"d-flex\" [formGroup]=\"doubleListeForm\">\n  <div class=\"select-container\">\n    <select multiple class=\"form-select\" [style.height]=\"height\" [style.width]=\"width\" (click)=\"sourceSelect($event)\" formControlName=\"source\">\n      <option *ngFor=\"let elementSource of listeSource\" [value]=\"elementSource\">{{keyToDisplay ? elementSource[keyToDisplay] : elementSource}} {{elementSource.lockList ? '*' : '' }}</option>\n    </select>\n  </div>\n\n  <div class=\"btn-group-vertical\" role=\"group\">\n    <button class=\"btn\" [disabled]=\"listeDestination.length === 0\" title=\"Tout envoyer \u00E0 gauche\"\n      (click)=\"moveAllToSource()\">\n      <i class=\"icon-b_fullleft\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateMoveToSourceButton\" title=\"Envoyer s\u00E9lection \u00E0 gauche\"\n      (click)=\"moveToSource()\">\n      <i class=\"icon-b_left\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateMoveToDestionationButton\" title=\"Envoyer s\u00E9lection \u00E0 droite\"\n      (click)=\"moveToDestionation()\">\n      <i class=\"icon-b_right\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"listeSource.length === 0\" title=\"Tout envoyer \u00E0 droite\"\n      (click)=\"moveAllToDestination()\">\n      <i class=\"icon-b_fullright\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n\n  <div class=\"select-container\">\n    <select multiple class=\"form-select\" [style.height]=\"height\" [style.width]=\"width\" (click)=\"destinationSelect($event)\" formControlName=\"destination\">\n      <option *ngFor=\"let elementDestination of listeDestination\" [value]=\"elementDestination\">{{keyToDisplay ? elementDestination[keyToDisplay] : elementDestination}} {{elementDestination.lockList ? '*' : '' }}\n      </option>\n    </select>\n  </div>\n  <div class=\"btn-group-vertical\" role=\"group\">\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveTopButton\" title=\"Envoyer s\u00E9lection en haut\"\n      (click)=\"moveToTop()\">\n      <i class=\"icon-b_top\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveTopButton\" (click)=\"moveUp()\" title=\"Monter s\u00E9lection\">\n      <i class=\"icon-b_up\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveBottomButton\" (click)=\"moveDown()\" title=\"Descendre s\u00E9lection\">\n      <i class=\"icon-b_down\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveBottomButton\" (click)=\"moveToBottom()\" title=\"Envoyer s\u00E9lection en bas\">\n      <i class=\"icon-b_bottom\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</div>\n", styles: [".select-container{display:flex;padding-right:1.143rem;padding-left:1.143rem}.btn{height:2.286rem;width:2.286rem;flex:none;background-color:#fff;border-color:#2461bb;margin-bottom:.5rem;border-radius:0;padding:0 .357rem;display:flex}.btn:hover{color:#2461bb;background:rgba(36,97,187,.1019607843);border-color:#2461bb}.btn i{margin:auto}.btn:focus-visible,.btn.focus-visible{box-shadow:0 0 0 .2rem #828a9180}.form-select{border-color:silver;background-color:#fff;color:#000;font-family:Segoe UI,Sans-serif;font-size:.929rem;padding:0;overflow:auto}select option :checked{background:#E8E8E8!important}select option{height:2.071rem;padding:.357rem .5rem}.icon-b_fullleft,.icon-b_left,.icon-b_right,.icon-b_fullright,.icon-b_top,.icon-b_bottom,.icon-b_up,.icon-b_down{font-size:1.429rem}.icon-b_fullleft:before,.icon-b_left:before,.icon-b_right:before,.icon-b_fullright:before,.icon-b_top:before,.icon-b_bottom:before,.icon-b_up:before,.icon-b_down:before{color:#2461bb}\n"], dependencies: [{ kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i1.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i1.SelectMultipleControlValueAccessor, selector: "select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]", inputs: ["compareWith"] }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.0", ngImport: i0, type: DoubleListeComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-double-liste', template: "<div class=\"d-flex\" [formGroup]=\"doubleListeForm\">\n  <div class=\"select-container\">\n    <select multiple class=\"form-select\" [style.height]=\"height\" [style.width]=\"width\" (click)=\"sourceSelect($event)\" formControlName=\"source\">\n      <option *ngFor=\"let elementSource of listeSource\" [value]=\"elementSource\">{{keyToDisplay ? elementSource[keyToDisplay] : elementSource}} {{elementSource.lockList ? '*' : '' }}</option>\n    </select>\n  </div>\n\n  <div class=\"btn-group-vertical\" role=\"group\">\n    <button class=\"btn\" [disabled]=\"listeDestination.length === 0\" title=\"Tout envoyer \u00E0 gauche\"\n      (click)=\"moveAllToSource()\">\n      <i class=\"icon-b_fullleft\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateMoveToSourceButton\" title=\"Envoyer s\u00E9lection \u00E0 gauche\"\n      (click)=\"moveToSource()\">\n      <i class=\"icon-b_left\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateMoveToDestionationButton\" title=\"Envoyer s\u00E9lection \u00E0 droite\"\n      (click)=\"moveToDestionation()\">\n      <i class=\"icon-b_right\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"listeSource.length === 0\" title=\"Tout envoyer \u00E0 droite\"\n      (click)=\"moveAllToDestination()\">\n      <i class=\"icon-b_fullright\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n\n  <div class=\"select-container\">\n    <select multiple class=\"form-select\" [style.height]=\"height\" [style.width]=\"width\" (click)=\"destinationSelect($event)\" formControlName=\"destination\">\n      <option *ngFor=\"let elementDestination of listeDestination\" [value]=\"elementDestination\">{{keyToDisplay ? elementDestination[keyToDisplay] : elementDestination}} {{elementDestination.lockList ? '*' : '' }}\n      </option>\n    </select>\n  </div>\n  <div class=\"btn-group-vertical\" role=\"group\">\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveTopButton\" title=\"Envoyer s\u00E9lection en haut\"\n      (click)=\"moveToTop()\">\n      <i class=\"icon-b_top\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveTopButton\" (click)=\"moveUp()\" title=\"Monter s\u00E9lection\">\n      <i class=\"icon-b_up\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveBottomButton\" (click)=\"moveDown()\" title=\"Descendre s\u00E9lection\">\n      <i class=\"icon-b_down\" aria-hidden=\"true\"></i>\n    </button>\n    <button class=\"btn\" [disabled]=\"!activateDestinationButton || disabledMoveBottomButton\" (click)=\"moveToBottom()\" title=\"Envoyer s\u00E9lection en bas\">\n      <i class=\"icon-b_bottom\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</div>\n", styles: [".select-container{display:flex;padding-right:1.143rem;padding-left:1.143rem}.btn{height:2.286rem;width:2.286rem;flex:none;background-color:#fff;border-color:#2461bb;margin-bottom:.5rem;border-radius:0;padding:0 .357rem;display:flex}.btn:hover{color:#2461bb;background:rgba(36,97,187,.1019607843);border-color:#2461bb}.btn i{margin:auto}.btn:focus-visible,.btn.focus-visible{box-shadow:0 0 0 .2rem #828a9180}.form-select{border-color:silver;background-color:#fff;color:#000;font-family:Segoe UI,Sans-serif;font-size:.929rem;padding:0;overflow:auto}select option :checked{background:#E8E8E8!important}select option{height:2.071rem;padding:.357rem .5rem}.icon-b_fullleft,.icon-b_left,.icon-b_right,.icon-b_fullright,.icon-b_top,.icon-b_bottom,.icon-b_up,.icon-b_down{font-size:1.429rem}.icon-b_fullleft:before,.icon-b_left:before,.icon-b_right:before,.icon-b_fullright:before,.icon-b_top:before,.icon-b_bottom:before,.icon-b_up:before,.icon-b_down:before{color:#2461bb}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.UntypedFormBuilder }]; }, propDecorators: { height: [{
                type: Input
            }], width: [{
                type: Input
            }], listeSource: [{
                type: Input
            }], listeDestination: [{
                type: Input
            }], 
        // Permet d'activer ou non le tri de la liste source
        sortSource: [{
                type: Input
            }], keyToDisplay: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG91YmxlLWxpc3RlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2Fjb3NzL2RvdWJsZS1saXN0ZS1hbmd1bGFyLWludHJhbmV0L3NyYy9saWIvZG91YmxlLWxpc3RlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2Fjb3NzL2RvdWJsZS1saXN0ZS1hbmd1bGFyLWludHJhbmV0L3NyYy9saWIvZG91YmxlLWxpc3RlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7O0FBUXpELE1BQU0sT0FBTyxvQkFBb0I7SUF3RC9CLFlBQW9CLEVBQXNCO1FBQXRCLE9BQUUsR0FBRixFQUFFLENBQW9CO1FBckQxQyxXQUFNLEdBQUcsTUFBTSxDQUFDO1FBR2hCLFVBQUssR0FBRyxNQUFNLENBQUM7UUFFZixpQkFBWSxHQUFVLEVBQUUsQ0FBQztRQWlCekI7OztXQUdHO1FBRUgscUJBQWdCLEdBQVUsRUFBRSxDQUFDO1FBRzdCLG9EQUFvRDtRQUNwRCxlQUFVLEdBQUcsS0FBSyxDQUFDO1FBVW5CLHFDQUFnQyxHQUFHLEtBQUssQ0FBQztRQUN6QywrQkFBMEIsR0FBRyxLQUFLLENBQUM7UUFDbkMsOEJBQXlCLEdBQUcsS0FBSyxDQUFDO1FBRWxDLDBCQUFxQixHQUFHLEtBQUssQ0FBQztRQUM5Qiw2QkFBd0IsR0FBRyxLQUFLLENBQUM7UUFFakMsb0JBQWUsR0FBcUIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDaEQsTUFBTSxFQUFFLEVBQUU7WUFDVixXQUFXLEVBQUUsRUFBRTtTQUNoQixDQUFDLENBQUM7SUFFMkMsQ0FBQztJQTlDL0M7OztPQUdHO0lBQ0gsSUFDSSxXQUFXLENBQUMsS0FBWTtRQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUMxQixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVELElBQUksV0FBVztRQUNiLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQztJQW1DRCxRQUFRLEtBQUksQ0FBQztJQUViLFlBQVksQ0FBQyxLQUFLO1FBQ2hCLElBQUksQ0FBQyxnQ0FBZ0MsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQ2pFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUVwRix1RUFBdUU7UUFDdkUsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDakMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLFFBQVEsRUFBRTtZQUNyQyxJQUFJLENBQUMsZ0NBQWdDLEdBQUcsS0FBSyxDQUFDO1NBQy9DO1FBRUQsSUFBSSxDQUFDLDBCQUEwQixHQUFHLEtBQUssQ0FBQztRQUN4QyxJQUFJLENBQUMseUJBQXlCLEdBQUcsS0FBSyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxLQUFLO1FBQ3JCLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUM7WUFDL0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRTlGLElBQUksQ0FBQywwQkFBMEIsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUM7WUFDaEUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRTlGLHVFQUF1RTtRQUN2RSxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNqQyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxRQUFRLEVBQUU7WUFDMUMsSUFBSSxDQUFDLDBCQUEwQixHQUFHLEtBQUssQ0FBQztTQUN6QztRQUVELElBQUksQ0FBQyxnQ0FBZ0MsR0FBRyxLQUFLLENBQUM7UUFFOUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELG9CQUFvQjtRQUNsQixNQUFNLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFFbkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2xCLDBDQUEwQztnQkFDMUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDakMsK0NBQStDO2dCQUMvQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3JCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxpQ0FBaUM7UUFDakMsS0FBSyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzNDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztTQUN2QztRQUVELElBQUksQ0FBQyxnQ0FBZ0MsR0FBRyxLQUFLLENBQUM7UUFDOUMsSUFBSSxDQUFDLDBCQUEwQixHQUFHLEtBQUssQ0FBQztJQUMxQyxDQUFDO0lBRUQsZUFBZTtRQUNiLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUVuQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNsQiwwQ0FBMEM7Z0JBQzFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM1QiwrQ0FBK0M7Z0JBQy9DLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDckI7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILGlDQUFpQztRQUNqQyxLQUFLLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEdBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDM0MsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7U0FDNUM7UUFFRCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLGdDQUFnQyxHQUFHLEtBQUssQ0FBQztRQUM5QyxJQUFJLENBQUMsMEJBQTBCLEdBQUcsS0FBSyxDQUFDO0lBQzFDLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN0RixJQUFJLENBQUMsZ0NBQWdDLEdBQUcsS0FBSyxDQUFDO0lBQ2hELENBQUM7SUFFRCxZQUFZO1FBQ1YsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRixJQUFJLENBQUMsMEJBQTBCLEdBQUcsS0FBSyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRUQsSUFBSSxDQUFDLFdBQWdCLEVBQUUsTUFBYSxFQUFFLElBQVc7UUFDL0MsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUMxQiwyREFBMkQ7WUFDM0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7Z0JBQ25CLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3BDLElBQUksS0FBSyxJQUFJLENBQUMsRUFBRztvQkFDZixNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7aUJBQ2hFO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDO1lBQzVCLE1BQU0sRUFBRSxFQUFFO1lBQ1YsV0FBVyxFQUFFLEVBQUU7U0FDaEIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHVFQUF1RTtJQUN2RSxVQUFVLENBQUMsS0FBSztRQUNkLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN2QixJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDMUQsVUFBVSxHQUFHLElBQUksQ0FBQztTQUNuQjtRQUNELE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxZQUFZO1FBQ1YsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN4RCxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzVCLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbkQsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFO29CQUN0RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDdkMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztpQkFDdEU7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELFNBQVM7UUFDUCxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2pFLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDM0IsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUMxQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNuRCxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7b0JBQ3RELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUN2QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7aUJBQzNDO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0lBQ2pDLENBQUM7SUFFRCxXQUFXLENBQUMsSUFBSTtRQUNkLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDbkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM5QixJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHO2dCQUNyRSxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUN4QixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQzthQUNmO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsTUFBTTtRQUNKLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDeEMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSyxVQUFVO1FBQ2hCLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsWUFBWSxLQUFLLFNBQVMsRUFBRTtZQUN0RCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDOUIsaURBQWlEO2dCQUNqRCxJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsRUFBRTtvQkFDekIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7aUJBQ3BHO3FCQUFNO29CQUNMLE9BQU8sQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztpQkFDOUQ7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUVEOzs7T0FHRztJQUNLLHVCQUF1QjtRQUM3QixNQUFNLGlCQUFpQixHQUFXLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ3JGLE1BQU0sU0FBUyxHQUFXLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRTNELDRGQUE0RjtRQUM1RixJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3BILElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUM7U0FDbkM7YUFBTTtZQUNMLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUM7U0FDcEM7UUFFRCw0RkFBNEY7UUFDNUYsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLEtBQUssSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQzVJLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUM7U0FDdEM7YUFBTTtZQUNMLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxLQUFLLENBQUM7U0FDdkM7SUFFSCxDQUFDOztpSEFyUVUsb0JBQW9CO3FHQUFwQixvQkFBb0IsZ09DUmpDLDIxRkFnREE7MkZEeENhLG9CQUFvQjtrQkFMaEMsU0FBUzsrQkFDRSxrQkFBa0I7eUdBTzVCLE1BQU07c0JBREwsS0FBSztnQkFJTixLQUFLO3NCQURKLEtBQUs7Z0JBVUYsV0FBVztzQkFEZCxLQUFLO2dCQWdCTixnQkFBZ0I7c0JBRGYsS0FBSzs7UUFJTixvREFBb0Q7UUFDcEQsVUFBVTtzQkFGVCxLQUFLO2dCQVVHLFlBQVk7c0JBQXBCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFVudHlwZWRGb3JtQnVpbGRlciwgVW50eXBlZEZvcm1Hcm91cCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbGliLWRvdWJsZS1saXN0ZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9kb3VibGUtbGlzdGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9kb3VibGUtbGlzdGUuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBEb3VibGVMaXN0ZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgQElucHV0KClcbiAgaGVpZ2h0ID0gJzEwMCUnO1xuXG4gIEBJbnB1dCgpXG4gIHdpZHRoID0gJzEwMCUnO1xuXG4gIF9saXN0ZVNvdXJjZTogYW55W10gPSBbXTtcblxuICAvKipcbiAgICogTGlzdGUgc291cmNlLCB0YWJsZWF1IGRlIHN0cmluZ3Mgb3UgZCdvYmpldHNcbiAgICogRW4gY2FzIGQnb2JqZXQsIGTDqWZpbmlyIGxhIGNsZWYgbG9ja0xpc3Qgw6AgdHJ1ZSBwZXJtZXQgZCdlbXDDqmNoZXIgdW4gY2hhbmdlbWVudCBkZSBsaXN0ZVxuICAgKi9cbiAgQElucHV0KClcbiAgc2V0IGxpc3RlU291cmNlKGxpc3RlOiBhbnlbXSkge1xuICAgIHRoaXMuX2xpc3RlU291cmNlID0gbGlzdGU7XG4gICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gIH1cblxuICBnZXQgbGlzdGVTb3VyY2UoKTogYW55W10ge1xuICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgIHJldHVybiB0aGlzLl9saXN0ZVNvdXJjZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0ZSBkZXN0aW5hdGlvbiwgdGFibGVhdSBkZSBzdHJpbmdzIG91IGQnb2JqZXRzXG4gICAqIEVuIGNhcyBkJ29iamV0LCBkw6lmaW5pciBsYSBjbGVmIGxvY2tMaXN0IMOgIHRydWUgcGVybWV0IGQnZW1ww6pjaGVyIHVuIGNoYW5nZW1lbnQgZGUgbGlzdGVcbiAgICovXG4gIEBJbnB1dCgpXG4gIGxpc3RlRGVzdGluYXRpb246IGFueVtdID0gW107XG5cbiAgQElucHV0KClcbiAgLy8gUGVybWV0IGQnYWN0aXZlciBvdSBub24gbGUgdHJpIGRlIGxhIGxpc3RlIHNvdXJjZVxuICBzb3J0U291cmNlID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIERhbnMgbGUgY2FzIG/DuSBsaXN0ZVNvdXJjZSBldCBsaXN0ZURlc3RpbmF0aW9uIHNvbnQgZGVzIG9iamVjdHNcbiAgICogUGFzc2UgbGEgY2xlZiDDoCBhZmZpY2hlciBldCBzdXIgbGEgcXVlbGxlIHRyaWVyXG4gICAqIFxuICAgKiBMYWlzc2UgdmlkZSBzaSB1dGlsaXNhdGlvbiBkJ3VuZSBsaXN0ZSBkZSBzdHJpbmdzXG4gICAqL1xuICBASW5wdXQoKSBrZXlUb0Rpc3BsYXk6IHN0cmluZztcblxuICBhY3RpdmF0ZU1vdmVUb0Rlc3Rpb25hdGlvbkJ1dHRvbiA9IGZhbHNlO1xuICBhY3RpdmF0ZU1vdmVUb1NvdXJjZUJ1dHRvbiA9IGZhbHNlO1xuICBhY3RpdmF0ZURlc3RpbmF0aW9uQnV0dG9uID0gZmFsc2U7XG5cbiAgZGlzYWJsZWRNb3ZlVG9wQnV0dG9uID0gZmFsc2U7XG4gIGRpc2FibGVkTW92ZUJvdHRvbUJ1dHRvbiA9IGZhbHNlO1xuXG4gIGRvdWJsZUxpc3RlRm9ybTogVW50eXBlZEZvcm1Hcm91cCA9IHRoaXMuZmIuZ3JvdXAoe1xuICAgIHNvdXJjZTogW10sXG4gICAgZGVzdGluYXRpb246IFtdXG4gIH0pO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZmI6IFVudHlwZWRGb3JtQnVpbGRlcikgeyB9XG5cbiAgbmdPbkluaXQoKSB7fVxuXG4gIHNvdXJjZVNlbGVjdChldmVudCkge1xuICAgIHRoaXMuYWN0aXZhdGVNb3ZlVG9EZXN0aW9uYXRpb25CdXR0b24gPSB0aGlzLmxpc3RlU291cmNlLmxlbmd0aCA+IDAgJiZcbiAgICAgIHRoaXMuZG91YmxlTGlzdGVGb3JtLnZhbHVlLnNvdXJjZSAmJiB0aGlzLmRvdWJsZUxpc3RlRm9ybS52YWx1ZS5zb3VyY2UubGVuZ3RoID4gMDtcbiAgICBcbiAgICAvLyBEaXNhYmxlIGwnaWPDtG5lIGRhbnMgbCfDqWzDqW1lbnQgZG9pdCDDqnRyZSB2ZXJyb3VpbGzDqSBkYW5zIGNldHRlIGxpc3RlXG4gICAgY29uc3QgaW5kZXggPSBldmVudC50YXJnZXQuaW5kZXg7XG4gICAgaWYgKHRoaXMubGlzdGVTb3VyY2VbaW5kZXhdPy5sb2NrTGlzdCkge1xuICAgICAgdGhpcy5hY3RpdmF0ZU1vdmVUb0Rlc3Rpb25hdGlvbkJ1dHRvbiA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuYWN0aXZhdGVNb3ZlVG9Tb3VyY2VCdXR0b24gPSBmYWxzZTtcbiAgICB0aGlzLmFjdGl2YXRlRGVzdGluYXRpb25CdXR0b24gPSBmYWxzZTtcbiAgfVxuXG4gIGRlc3RpbmF0aW9uU2VsZWN0KGV2ZW50KSB7XG4gICAgdGhpcy5hY3RpdmF0ZURlc3RpbmF0aW9uQnV0dG9uID0gdGhpcy5saXN0ZURlc3RpbmF0aW9uLmxlbmd0aCA+IDEgJiZcbiAgICAgIHRoaXMuZG91YmxlTGlzdGVGb3JtLnZhbHVlLmRlc3RpbmF0aW9uICYmIHRoaXMuZG91YmxlTGlzdGVGb3JtLnZhbHVlLmRlc3RpbmF0aW9uLmxlbmd0aCA+IDA7XG5cbiAgICB0aGlzLmFjdGl2YXRlTW92ZVRvU291cmNlQnV0dG9uID0gdGhpcy5saXN0ZURlc3RpbmF0aW9uLmxlbmd0aCA+IDAgJiZcbiAgICAgIHRoaXMuZG91YmxlTGlzdGVGb3JtLnZhbHVlLmRlc3RpbmF0aW9uICYmIHRoaXMuZG91YmxlTGlzdGVGb3JtLnZhbHVlLmRlc3RpbmF0aW9uLmxlbmd0aCA+IDA7XG5cbiAgICAvLyBEaXNhYmxlIGwnaWPDtG5lIGRhbnMgbCfDqWzDqW1lbnQgZG9pdCDDqnRyZSB2ZXJyb3VpbGzDqSBkYW5zIGNldHRlIGxpc3RlXG4gICAgY29uc3QgaW5kZXggPSBldmVudC50YXJnZXQuaW5kZXg7XG4gICAgaWYgKHRoaXMubGlzdGVEZXN0aW5hdGlvbltpbmRleF0/LmxvY2tMaXN0KSB7XG4gICAgICB0aGlzLmFjdGl2YXRlTW92ZVRvU291cmNlQnV0dG9uID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5hY3RpdmF0ZU1vdmVUb0Rlc3Rpb25hdGlvbkJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgdGhpcy5jaGVja0Rlc3RpbmF0aW9uQnV0dG9ucygpO1xuICB9XG5cbiAgbW92ZUFsbFRvRGVzdGluYXRpb24oKSB7XG4gICAgY29uc3QgdG1wTGlzdCA9IFtdO1xuXG4gICAgdGhpcy5saXN0ZVNvdXJjZS5mb3JFYWNoKChlbGVtLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKCFlbGVtLmxvY2tMaXN0KSB7XG4gICAgICAgIC8vIFB1c2ggbGVzIMOpbMOpbWVudHMgcG91dmFudCDDqnRyZSBkw6lwbGFjw6lzXG4gICAgICAgIHRoaXMubGlzdGVEZXN0aW5hdGlvbi5wdXNoKGVsZW0pO1xuICAgICAgICAvLyBHYXJkZSBlbiBtw6ltb2lyZSBsZXVyIGluZGV4IHBvdXIgc3VwcHJlc3Npb25cbiAgICAgICAgdG1wTGlzdC5wdXNoKGluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFN1cHByaW1lIGxlcyDDqWzDqW1lbnRzIGTDqXBsYWPDqXNcbiAgICBmb3IgKGxldCBpID0gdG1wTGlzdC5sZW5ndGggLTE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmxpc3RlU291cmNlLnNwbGljZSh0bXBMaXN0W2ldLDEpO1xuICAgIH1cblxuICAgIHRoaXMuYWN0aXZhdGVNb3ZlVG9EZXN0aW9uYXRpb25CdXR0b24gPSBmYWxzZTtcbiAgICB0aGlzLmFjdGl2YXRlTW92ZVRvU291cmNlQnV0dG9uID0gZmFsc2U7XG4gIH1cblxuICBtb3ZlQWxsVG9Tb3VyY2UoKSB7XG4gICAgY29uc3QgdG1wTGlzdCA9IFtdO1xuXG4gICAgdGhpcy5saXN0ZURlc3RpbmF0aW9uLmZvckVhY2goKGVsZW0sIGluZGV4KSA9PiB7XG4gICAgICBpZiAoIWVsZW0ubG9ja0xpc3QpIHtcbiAgICAgICAgLy8gUHVzaCBsZXMgw6lsw6ltZW50cyBwb3V2YW50IMOqdHJlIGTDqXBsYWPDqXNcbiAgICAgICAgdGhpcy5saXN0ZVNvdXJjZS5wdXNoKGVsZW0pO1xuICAgICAgICAvLyBHYXJkZSBlbiBtw6ltb2lyZSBsZXVyIGluZGV4IHBvdXIgc3VwcHJlc3Npb25cbiAgICAgICAgdG1wTGlzdC5wdXNoKGluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFN1cHByaW1lIGxlcyDDqWzDqW1lbnRzIGTDqXBsYWPDqXNcbiAgICBmb3IgKGxldCBpID0gdG1wTGlzdC5sZW5ndGggLTE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmxpc3RlRGVzdGluYXRpb24uc3BsaWNlKHRtcExpc3RbaV0sMSk7XG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gICAgdGhpcy5hY3RpdmF0ZU1vdmVUb0Rlc3Rpb25hdGlvbkJ1dHRvbiA9IGZhbHNlO1xuICAgIHRoaXMuYWN0aXZhdGVNb3ZlVG9Tb3VyY2VCdXR0b24gPSBmYWxzZTtcbiAgfVxuXG4gIG1vdmVUb0Rlc3Rpb25hdGlvbigpIHtcbiAgICB0aGlzLm1vdmUodGhpcy5kb3VibGVMaXN0ZUZvcm0udmFsdWUuc291cmNlLCB0aGlzLmxpc3RlU291cmNlLCB0aGlzLmxpc3RlRGVzdGluYXRpb24pO1xuICAgIHRoaXMuYWN0aXZhdGVNb3ZlVG9EZXN0aW9uYXRpb25CdXR0b24gPSBmYWxzZTtcbiAgfVxuXG4gIG1vdmVUb1NvdXJjZSgpIHtcbiAgICB0aGlzLm1vdmUodGhpcy5kb3VibGVMaXN0ZUZvcm0udmFsdWUuZGVzdGluYXRpb24sIHRoaXMubGlzdGVEZXN0aW5hdGlvbiwgdGhpcy5saXN0ZVNvdXJjZSk7XG4gICAgdGhpcy5hY3RpdmF0ZU1vdmVUb1NvdXJjZUJ1dHRvbiA9IGZhbHNlO1xuICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICB9XG5cbiAgbW92ZShmb3JtQ29udHJvbDogYW55LCBzb3VyY2U6IGFueVtdLCBkZXN0OiBhbnlbXSkge1xuICAgIGZvcm1Db250cm9sLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgLy8gVW5pcXVlbWVudCBkYW5zIGxlIGNhcyBvw7kgbCfDqWzDqW1lbnQgbidlc3QgcGFzIHZlcnJvdWlsbMOpXG4gICAgICBpZiAoIXZhbHVlLmxvY2tMaXN0KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc291cmNlLmluZGV4T2YodmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCApIHtcbiAgICAgICAgICBzb3VyY2Uuc3BsaWNlKGluZGV4LCAxKS5mb3JFYWNoKGVsZW1lbnQgPT4gZGVzdC5wdXNoKGVsZW1lbnQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZG91YmxlTGlzdGVGb3JtLnNldFZhbHVlKHtcbiAgICAgIHNvdXJjZTogW10sXG4gICAgICBkZXN0aW5hdGlvbjogW11cbiAgICB9KTtcbiAgfVxuXG4gIC8vIHBvdXIgdsOpcmlmaWVyIHNpIGwnw6lsw6ltZW50IHBhc3PDqSBlbiBwYXJhbcOodHJlIGVzdCBzw6lsw6ljdGlvbm7DqSBvdSBwYXNcbiAgaXNTZWxlY3RlZCh2YWx1ZSkge1xuICAgIGxldCBpc1NlbGVjdGVkID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuZG91YmxlTGlzdGVGb3JtLnZhbHVlLmRlc3RpbmF0aW9uLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBpc1NlbGVjdGVkO1xuICB9XG5cbiAgbW92ZVRvQm90dG9tKCkge1xuICAgIGNvbnN0IGl0ZXJhdGlvbkxpc3QgPSBBcnJheS5mcm9tKHRoaXMubGlzdGVEZXN0aW5hdGlvbik7XG4gICAgaXRlcmF0aW9uTGlzdC5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5saXN0ZURlc3RpbmF0aW9uLmluZGV4T2YodmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMubGlzdGVEZXN0aW5hdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmxpc3RlRGVzdGluYXRpb24uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB0aGlzLmxpc3RlRGVzdGluYXRpb24uc3BsaWNlKHRoaXMubGlzdGVEZXN0aW5hdGlvbi5sZW5ndGgsIDAsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jaGVja0Rlc3RpbmF0aW9uQnV0dG9ucygpO1xuICB9XG5cbiAgbW92ZVRvVG9wKCkge1xuICAgIGNvbnN0IHJldmVyc2VkTGlzdCA9IEFycmF5LmZyb20odGhpcy5saXN0ZURlc3RpbmF0aW9uKS5yZXZlcnNlKCk7XG4gICAgcmV2ZXJzZWRMaXN0LmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNTZWxlY3RlZCh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxpc3RlRGVzdGluYXRpb24uaW5kZXhPZih2YWx1ZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5saXN0ZURlc3RpbmF0aW9uLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMubGlzdGVEZXN0aW5hdGlvbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHRoaXMubGlzdGVEZXN0aW5hdGlvbi5zcGxpY2UoMCwgMCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNoZWNrRGVzdGluYXRpb25CdXR0b25zKCk7XG4gIH1cblxuICBtb3ZlT25lU3RlcChsaXN0KSB7XG4gICAgbGlzdC5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIGNvbnN0IGkgPSBsaXN0LmluZGV4T2YodmFsdWUpO1xuICAgICAgaWYgKHRoaXMuaXNTZWxlY3RlZCh2YWx1ZSkgJiYgIXRoaXMuaXNTZWxlY3RlZChsaXN0W2kgLSAxXSkgJiYgaSA+IDAgKSB7XG4gICAgICAgIGNvbnN0IHRtcCA9IGxpc3RbaSAtIDFdO1xuICAgICAgICBsaXN0W2kgLSAxXSA9IGxpc3RbaV07XG4gICAgICAgIGxpc3RbaV0gPSB0bXA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBtb3ZlVXAoKSB7XG4gICAgdGhpcy5tb3ZlT25lU3RlcCh0aGlzLmxpc3RlRGVzdGluYXRpb24pO1xuICAgIHRoaXMuY2hlY2tEZXN0aW5hdGlvbkJ1dHRvbnMoKTtcbiAgfVxuXG4gIG1vdmVEb3duKCkge1xuICAgIHRoaXMubW92ZU9uZVN0ZXAodGhpcy5saXN0ZURlc3RpbmF0aW9uLnJldmVyc2UoKSk7XG4gICAgdGhpcy5saXN0ZURlc3RpbmF0aW9uLnJldmVyc2UoKTtcbiAgICB0aGlzLmNoZWNrRGVzdGluYXRpb25CdXR0b25zKCk7XG4gIH1cblxuICAvKipcbiAgICogRWZmZWN0dWUgdW4gdHJpIGRlIGxhIGxpc3RlIHNvdXJjZSBzaSBsZSB0cmkgZXN0IGFjdGl2w6lcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlU29ydCgpIHtcbiAgICBpZiAodGhpcy5zb3J0U291cmNlICYmIHRoaXMuX2xpc3RlU291cmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2xpc3RlU291cmNlLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gRGFucyBsZSBjYXMgZCd1biBvYmpldCwgdXRpbGlzZSBsYSBjbGVmIHZvdWx1ZVxuICAgICAgICBpZiAodHlwZW9mIGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgcmV0dXJuIGFbdGhpcy5rZXlUb0Rpc3BsYXldLmxvY2FsZUNvbXBhcmUoYlt0aGlzLmtleVRvRGlzcGxheV0sICdmcicsIHsgaWdub3JlUHVuY3R1YXRpb246IHRydWUgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiLCAnZnInLCB7IGlnbm9yZVB1bmN0dWF0aW9uOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVsOpcmlmaWUgw6AgY2hhcXVlIG1vdXZlbWVudCBkZSBoYXV0IGVuIGJhcywgZGUgYmFzIGVuIGhhdXQgZXQgw6AgY2hhcXVlIHPDqWxlY3Rpb24gZGFucyBsYSBsaXN0ZSBkZSBkZXN0aW5hdGlvblxuICAgKiBTaSBsZXMgYm91dG9ucyBoYXV0L2JhcyBkb2l2ZW50IMOqdHJlIGFjdGl2w6kgb3Ugbm9uXG4gICAqL1xuICBwcml2YXRlIGNoZWNrRGVzdGluYXRpb25CdXR0b25zKCk6IHZvaWQge1xuICAgIGNvbnN0IGxhc3RTZWxlY3RlZEluZGV4OiBudW1iZXIgPSB0aGlzLmRvdWJsZUxpc3RlRm9ybS52YWx1ZS5kZXN0aW5hdGlvbj8ubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBsYXN0SW5kZXg6IG51bWJlciA9IHRoaXMubGlzdGVEZXN0aW5hdGlvbi5sZW5ndGggLSAxO1xuXG4gICAgLy8gVsOpcmlmaWUgc2kgbGEgcHJlbWnDqHJlIHZhbGV1ciBkZSBsYSBzw6lsZWN0aW9uIGNvcnJlc3BvbmQgw6AgbGEgcHJlbWnDqHJlIHZhbGV1ciBkZSBsYSBsaXN0ZVxuICAgIGlmICh0aGlzLmRvdWJsZUxpc3RlRm9ybS52YWx1ZS5kZXN0aW5hdGlvbiAmJiB0aGlzLmRvdWJsZUxpc3RlRm9ybS52YWx1ZS5kZXN0aW5hdGlvblswXSA9PT0gdGhpcy5saXN0ZURlc3RpbmF0aW9uWzBdKSB7XG4gICAgICB0aGlzLmRpc2FibGVkTW92ZVRvcEJ1dHRvbiA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZWRNb3ZlVG9wQnV0dG9uID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVsOpcmlmaWUgc2kgbGEgZGVybmnDqHJlIHZhbGV1ciBkZSBsYSBzw6lsZWN0aW9uIGNvcnJlc3BvbmQgw6AgbGEgZGVybmnDqHJlIHZhbGV1ciBkZSBsYSBsaXN0ZVxuICAgIGlmICh0aGlzLmRvdWJsZUxpc3RlRm9ybS52YWx1ZS5kZXN0aW5hdGlvbiAmJiB0aGlzLmRvdWJsZUxpc3RlRm9ybS52YWx1ZS5kZXN0aW5hdGlvbltsYXN0U2VsZWN0ZWRJbmRleF0gPT09IHRoaXMubGlzdGVEZXN0aW5hdGlvbltsYXN0SW5kZXhdKSB7XG4gICAgICB0aGlzLmRpc2FibGVkTW92ZUJvdHRvbUJ1dHRvbiA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZWRNb3ZlQm90dG9tQnV0dG9uID0gZmFsc2U7XG4gICAgfVxuXG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJkLWZsZXhcIiBbZm9ybUdyb3VwXT1cImRvdWJsZUxpc3RlRm9ybVwiPlxuICA8ZGl2IGNsYXNzPVwic2VsZWN0LWNvbnRhaW5lclwiPlxuICAgIDxzZWxlY3QgbXVsdGlwbGUgY2xhc3M9XCJmb3JtLXNlbGVjdFwiIFtzdHlsZS5oZWlnaHRdPVwiaGVpZ2h0XCIgW3N0eWxlLndpZHRoXT1cIndpZHRoXCIgKGNsaWNrKT1cInNvdXJjZVNlbGVjdCgkZXZlbnQpXCIgZm9ybUNvbnRyb2xOYW1lPVwic291cmNlXCI+XG4gICAgICA8b3B0aW9uICpuZ0Zvcj1cImxldCBlbGVtZW50U291cmNlIG9mIGxpc3RlU291cmNlXCIgW3ZhbHVlXT1cImVsZW1lbnRTb3VyY2VcIj57e2tleVRvRGlzcGxheSA/IGVsZW1lbnRTb3VyY2Vba2V5VG9EaXNwbGF5XSA6IGVsZW1lbnRTb3VyY2V9fSB7e2VsZW1lbnRTb3VyY2UubG9ja0xpc3QgPyAnKicgOiAnJyB9fTwvb3B0aW9uPlxuICAgIDwvc2VsZWN0PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwLXZlcnRpY2FsXCIgcm9sZT1cImdyb3VwXCI+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIFtkaXNhYmxlZF09XCJsaXN0ZURlc3RpbmF0aW9uLmxlbmd0aCA9PT0gMFwiIHRpdGxlPVwiVG91dCBlbnZveWVyIMOgIGdhdWNoZVwiXG4gICAgICAoY2xpY2spPVwibW92ZUFsbFRvU291cmNlKClcIj5cbiAgICAgIDxpIGNsYXNzPVwiaWNvbi1iX2Z1bGxsZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG5cIiBbZGlzYWJsZWRdPVwiIWFjdGl2YXRlTW92ZVRvU291cmNlQnV0dG9uXCIgdGl0bGU9XCJFbnZveWVyIHPDqWxlY3Rpb24gw6AgZ2F1Y2hlXCJcbiAgICAgIChjbGljayk9XCJtb3ZlVG9Tb3VyY2UoKVwiPlxuICAgICAgPGkgY2xhc3M9XCJpY29uLWJfbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuXCIgW2Rpc2FibGVkXT1cIiFhY3RpdmF0ZU1vdmVUb0Rlc3Rpb25hdGlvbkJ1dHRvblwiIHRpdGxlPVwiRW52b3llciBzw6lsZWN0aW9uIMOgIGRyb2l0ZVwiXG4gICAgICAoY2xpY2spPVwibW92ZVRvRGVzdGlvbmF0aW9uKClcIj5cbiAgICAgIDxpIGNsYXNzPVwiaWNvbi1iX3JpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG5cIiBbZGlzYWJsZWRdPVwibGlzdGVTb3VyY2UubGVuZ3RoID09PSAwXCIgdGl0bGU9XCJUb3V0IGVudm95ZXIgw6AgZHJvaXRlXCJcbiAgICAgIChjbGljayk9XCJtb3ZlQWxsVG9EZXN0aW5hdGlvbigpXCI+XG4gICAgICA8aSBjbGFzcz1cImljb24tYl9mdWxscmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJzZWxlY3QtY29udGFpbmVyXCI+XG4gICAgPHNlbGVjdCBtdWx0aXBsZSBjbGFzcz1cImZvcm0tc2VsZWN0XCIgW3N0eWxlLmhlaWdodF09XCJoZWlnaHRcIiBbc3R5bGUud2lkdGhdPVwid2lkdGhcIiAoY2xpY2spPVwiZGVzdGluYXRpb25TZWxlY3QoJGV2ZW50KVwiIGZvcm1Db250cm9sTmFtZT1cImRlc3RpbmF0aW9uXCI+XG4gICAgICA8b3B0aW9uICpuZ0Zvcj1cImxldCBlbGVtZW50RGVzdGluYXRpb24gb2YgbGlzdGVEZXN0aW5hdGlvblwiIFt2YWx1ZV09XCJlbGVtZW50RGVzdGluYXRpb25cIj57e2tleVRvRGlzcGxheSA/IGVsZW1lbnREZXN0aW5hdGlvbltrZXlUb0Rpc3BsYXldIDogZWxlbWVudERlc3RpbmF0aW9ufX0ge3tlbGVtZW50RGVzdGluYXRpb24ubG9ja0xpc3QgPyAnKicgOiAnJyB9fVxuICAgICAgPC9vcHRpb24+XG4gICAgPC9zZWxlY3Q+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwLXZlcnRpY2FsXCIgcm9sZT1cImdyb3VwXCI+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIFtkaXNhYmxlZF09XCIhYWN0aXZhdGVEZXN0aW5hdGlvbkJ1dHRvbiB8fCBkaXNhYmxlZE1vdmVUb3BCdXR0b25cIiB0aXRsZT1cIkVudm95ZXIgc8OpbGVjdGlvbiBlbiBoYXV0XCJcbiAgICAgIChjbGljayk9XCJtb3ZlVG9Ub3AoKVwiPlxuICAgICAgPGkgY2xhc3M9XCJpY29uLWJfdG9wXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG5cIiBbZGlzYWJsZWRdPVwiIWFjdGl2YXRlRGVzdGluYXRpb25CdXR0b24gfHwgZGlzYWJsZWRNb3ZlVG9wQnV0dG9uXCIgKGNsaWNrKT1cIm1vdmVVcCgpXCIgdGl0bGU9XCJNb250ZXIgc8OpbGVjdGlvblwiPlxuICAgICAgPGkgY2xhc3M9XCJpY29uLWJfdXBcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIFtkaXNhYmxlZF09XCIhYWN0aXZhdGVEZXN0aW5hdGlvbkJ1dHRvbiB8fCBkaXNhYmxlZE1vdmVCb3R0b21CdXR0b25cIiAoY2xpY2spPVwibW92ZURvd24oKVwiIHRpdGxlPVwiRGVzY2VuZHJlIHPDqWxlY3Rpb25cIj5cbiAgICAgIDxpIGNsYXNzPVwiaWNvbi1iX2Rvd25cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIFtkaXNhYmxlZF09XCIhYWN0aXZhdGVEZXN0aW5hdGlvbkJ1dHRvbiB8fCBkaXNhYmxlZE1vdmVCb3R0b21CdXR0b25cIiAoY2xpY2spPVwibW92ZVRvQm90dG9tKClcIiB0aXRsZT1cIkVudm95ZXIgc8OpbGVjdGlvbiBlbiBiYXNcIj5cbiAgICAgIDxpIGNsYXNzPVwiaWNvbi1iX2JvdHRvbVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICA8L2J1dHRvbj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==